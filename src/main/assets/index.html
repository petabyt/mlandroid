<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<style>
	html, body {
		width: 100%;
		height: 100%;
		overflow: hidden;
		margin: 3px;
	}

	#container * {
		margin: 2px;
	}

	#container {
		width: 100%;
		height: 100%;
		position: absolute;
		top: 0px;
		left: 0px;
	}
	
	button {
		padding: 5px 10px;
	}

	button:active {
		background: grey;
	}

	#htmllog {
		height: 400px;
		border: 1px solid black;
		display: block;
	}
	</style>
</head>
<body>
	<div id="container">
		<button onclick="b.connect()">Connect</button>
		<button onclick="b.runEventProc('TurnOnDisplay')">Run "TurnOnDisplay"</button>
		<button onclick="b.runEventProc('TurnOffDisplay')">Run "TurnOffDisplay"</button>
		<button onclick="b.disconnect()">Disconnect</button>
		<button onclick="demo()">Demo</button>
		<button onclick="killDemo()">Stop </button>
		<br>
		<div id="htmllog"></div>
	</div>
</body>
<script>
var htmllog = document.getElementById('htmllog');
var demoi = 0;

function main() {
	log("Magic Lantern Android v0.1");
	log("Created by Daniel C");
}

function demo() {
	b.connect();

	var i = 0;
	var toggle = false;
	demoi = setInterval(function() {
		if (toggle) {
			b.runEventProc('TurnOffDisplay')
		} else {
			b.runEventProc('TurnOnDisplay')
		}

		log("Iteration " + i);
		i++;

		toggle = !toggle;
	}, 500);
}

function killDemo() {
	if (demoi == 0) {
		return;
	}

	clearInterval(demoi);
	demoi = 0;
}

function log(string) {
	if (htmllog.children.length > 15) {
		htmllog.children[0].remove();
	}

	htmllog.innerHTML += "<p>" + string + "</p>";
}

main();
</script>
</html>
